---
import { pricingData } from "../assets/data/plans_pricing_def.js";
const { futbolistas, funcional, personal, parejas } = pricingData;
const URL_MAIN = import.meta.env.BASE_URL;

const tabBtnClasses =
  "tab-btn px-2 sm:px-6 py-3 rounded-xl text-[10px] sm:text-sm font-black uppercase tracking-tighter sm:tracking-widest transition-all border-2 border-transparent bg-zinc-100 text-zinc-500 cursor-pointer [&.active]:bg-zinc-900 [&.active]:text-white [&.active]:border-brand-green [&.active]:shadow-lg hover:bg-zinc-200 flex items-center justify-center text-center leading-tight min-h-[42px]";
---

<section
  id="tarifas"
  class="py-4 sm:py-6 lg:py-8 2xl:py-10 bg-white overflow-hidden"
>
  <div class="max-w-7xl 2xl:max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8">
    <header class="text-center max-w-3xl mx-auto mb-6 sm:mb-20">
      <span
        class="inline-block text-brand-green text-xs sm:text-sm font-black uppercase tracking-widest mb-3 sm:mb-4"
      >
        Tarifas
      </span>
      <h2
        class="text-2xl sm:text-4xl md:text-5xl 2xl:text-6xl font-black text-zinc-900 uppercase mb-4 sm:mb-6"
      >
        Planes para cada atleta
      </h2>
      <p
        class="text-zinc-500 text-sm sm:text-lg 2xl:text-xl font-medium leading-relaxed"
      >
        Opciones adaptadas a tus objetivos, con grupos reducidos y seguimiento
        profesional en cada sesión.
      </p>
    </header>

    <div
      class="grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-4 mb-12 sm:mb-16 max-w-4xl mx-auto"
      id="pricing-tabs"
    >
      <button data-tab="futbolistas" class={`${tabBtnClasses} active w-full`}
        >Futbolistas</button
      >
      <button data-tab="funcional" class={`${tabBtnClasses} w-full`}
        >Funcional</button
      >
      <button data-tab="personal" class={`${tabBtnClasses} w-full`}
        >Personal</button
      >
      <button data-tab="parejas" class={`${tabBtnClasses} w-full`}
        >Parejas</button
      >
    </div>

    <div class="max-w-3xl 2xl:max-w-4xl mx-auto">
      <div id="content-futbolistas" class="tab-content block animate-fade-in">
        <div
          class="bg-zinc-50 rounded-2xl border border-zinc-200 overflow-hidden shadow-sm mb-8"
        >
          {
            futbolistas.plans.map((plan, idx) => (
              <div
                class={`flex justify-between items-center px-5 sm:px-8 py-4 sm:py-5 border-b border-zinc-200 last:border-0 transition-colors ${plan.highlighted ? "bg-zinc-900 text-white border-zinc-700" : idx % 2 !== 0 ? "bg-white" : "bg-zinc-50"}`}
              >
                <div class="shrink">
                  <p
                    class={`font-black uppercase text-xs sm:text-base 2xl:text-lg ${plan.highlighted ? "text-white" : "text-zinc-900"}`}
                  >
                    {plan.name}
                  </p>
                  <p
                    class={`text-[10px] sm:text-sm font-medium ${plan.highlighted ? "text-zinc-400" : "text-zinc-500"}`}
                  >
                    {plan.sessions}
                  </p>
                </div>
                <div class="flex items-baseline gap-1.5 shrink-0 ml-4">
                  <span class="text-xl sm:text-3xl 2xl:text-4xl font-black text-brand-green">
                    {plan.price}€
                  </span>
                  <span
                    class={`text-[9px] sm:text-xs uppercase font-bold whitespace-nowrap ${plan.highlighted ? "text-zinc-400" : "text-zinc-500"}`}
                  >
                    / {plan.unit}
                  </span>
                </div>
              </div>
            ))
          }
        </div>

        <div class="bg-zinc-50 rounded-2xl p-6 sm:p-8 border border-zinc-100">
          <h4
            class="font-black text-zinc-900 mb-5 uppercase text-[10px] sm:text-sm tracking-wider"
          >
            Incluido en alto rendimiento futbolistas:
          </h4>
          <div class="grid sm:grid-cols-2 gap-x-6 gap-y-3">
            {
              futbolistas.includes.map((item) => (
                <div class="flex items-center gap-3">
                  <svg
                    class="w-4 h-4 text-brand-green shrink-0"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="3"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                  <span class="text-zinc-600 text-xs sm:text-sm font-medium">
                    {item}
                  </span>
                </div>
              ))
            }
          </div>
        </div>
      </div>

      <div id="content-funcional" class="tab-content hidden animate-fade-in">
        <div
          class="bg-zinc-50 rounded-2xl border border-zinc-200 overflow-hidden shadow-sm mb-8"
        >
          {
            funcional.plans.map((plan, idx) => (
              <div
                class={`flex justify-between items-center px-5 sm:px-8 py-4 sm:py-5 border-b border-zinc-200 last:border-0 transition-colors ${plan.highlighted ? "bg-zinc-900 text-white border-zinc-700" : idx % 2 !== 0 ? "bg-white" : "bg-zinc-50"}`}
              >
                <div class="shrink">
                  <p
                    class={`font-black uppercase text-xs sm:text-base 2xl:text-lg ${plan.highlighted ? "text-white" : "text-zinc-900"}`}
                  >
                    {plan.name}
                  </p>
                  <p
                    class={`text-[10px] sm:text-sm font-medium ${plan.highlighted ? "text-zinc-400" : "text-zinc-500"}`}
                  >
                    {plan.sessions}
                  </p>
                </div>
                <div class="flex items-baseline gap-1.5 shrink-0 ml-4">
                  <span class="text-xl sm:text-3xl 2xl:text-4xl font-black text-brand-green">
                    {plan.price}€
                  </span>
                  <span
                    class={`text-[9px] sm:text-xs uppercase font-bold whitespace-nowrap ${plan.highlighted ? "text-zinc-400" : "text-zinc-500"}`}
                  >
                    / mes
                  </span>
                </div>
              </div>
            ))
          }
        </div>

        <div class="bg-zinc-50 rounded-2xl p-6 sm:p-8 border border-zinc-100">
          <h4
            class="font-black text-zinc-900 mb-5 uppercase text-[10px] sm:text-sm tracking-wider"
          >
            Incluido en entrenamiento funcional:
          </h4>
          <div class="grid sm:grid-cols-2 gap-x-6 gap-y-3">
            {
              funcional.includes.map((item) => (
                <div class="flex items-center gap-3">
                  <svg
                    class="w-4 h-4 text-brand-green shrink-0"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="3"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                  <span class="text-zinc-600 text-xs sm:text-sm font-medium">
                    {item}
                  </span>
                </div>
              ))
            }
          </div>
        </div>
      </div>

      <div id="content-personal" class="tab-content hidden animate-fade-in">
        <div
          class="bg-zinc-50 rounded-2xl border border-zinc-200 overflow-hidden shadow-sm mb-8"
        >
          {
            personal.plans.map((plan, idx) => {
              const isBono = plan.unit.toLowerCase() === "bono";
              return (
                <div
                  class={`flex justify-between items-center px-5 sm:px-8 py-4 sm:py-5 border-b border-zinc-200 last:border-0 transition-colors ${isBono ? "bg-zinc-900 text-white border-zinc-700" : idx % 2 !== 0 ? "bg-white" : "bg-zinc-50"}`}
                >
                  <div class="shrink">
                    <p
                      class={`font-black uppercase text-xs sm:text-base 2xl:text-lg ${isBono ? "text-white" : "text-zinc-900"}`}
                    >
                      {plan.name}
                    </p>
                  </div>
                  <div class="flex items-baseline gap-1.5 shrink-0 ml-4">
                    <span class="text-xl sm:text-3xl 2xl:text-4xl font-black text-brand-green">
                      {plan.price}€
                    </span>
                    <span
                      class={`text-[9px] sm:text-xs uppercase font-bold whitespace-nowrap ${isBono ? "text-zinc-400" : "text-zinc-500"}`}
                    >
                      / {plan.unit}
                    </span>
                  </div>
                </div>
              );
            })
          }
        </div>
        <div class="bg-zinc-50 rounded-2xl p-6 sm:p-8 border border-zinc-100">
          <h4
            class="font-black text-zinc-900 mb-5 uppercase text-[10px] sm:text-sm tracking-wider"
          >
            Incluido en planes personales:
          </h4>
          <div class="grid sm:grid-cols-2 gap-x-6 gap-y-3">
            {
              personal.includes.map((item) => (
                <div class="flex items-center gap-3">
                  <svg
                    class="w-4 h-4 text-brand-green shrink-0"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="3"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                  <span class="text-zinc-600 text-xs sm:text-sm font-medium">
                    {item}
                  </span>
                </div>
              ))
            }
          </div>
        </div>
      </div>

      <div id="content-parejas" class="tab-content hidden animate-fade-in">
        <div
          class="bg-zinc-50 rounded-2xl border border-zinc-200 overflow-hidden shadow-sm"
        >
          {
            parejas.plans.map((plan, idx) => {
              const isBono = plan.name.toLowerCase().includes("bono");
              return (
                <div
                  class={`flex justify-between items-center px-5 sm:px-8 py-4 sm:py-5 border-b border-zinc-200 last:border-0 transition-colors ${isBono ? "bg-zinc-900 text-white border-zinc-700" : idx % 2 !== 0 ? "bg-white" : "bg-zinc-50"}`}
                >
                  <div class="shrink">
                    <p
                      class={`font-black uppercase text-xs sm:text-base 2xl:text-lg ${isBono ? "text-white" : "text-zinc-900"}`}
                    >
                      {plan.name}
                    </p>
                  </div>
                  <div class="flex items-baseline gap-1.5 shrink-0 ml-4">
                    <span class="text-xl sm:text-3xl 2xl:text-4xl font-black text-brand-green">
                      {plan.price}€
                    </span>
                    <span
                      class={`text-[9px] sm:text-xs uppercase font-bold whitespace-nowrap ${isBono ? "text-zinc-400" : "text-zinc-500"}`}
                    >
                      / {plan.unit}
                    </span>
                  </div>
                </div>
              );
            })
          }
        </div>
      </div>
    </div>

    <div
      class="mt-8 sm:mt-12 bg-zinc-900 rounded-2xl p-6 sm:p-10 2xl:p-16 flex flex-col md:flex-row items-center justify-between gap-6 sm:gap-8 border-b-4 sm:border-b-8 border-brand-green max-w-4xl 2xl:max-w-6xl mx-auto shadow-2xl"
    >
      <div class="flex items-center gap-5 sm:gap-8 flex-col md:flex-row">
        <div
          class="shrink-0 w-12 h-12 rounded-full bg-brand-green/15 flex items-center justify-center"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="icon icon-tabler icons-tabler-outline icon-tabler-gift text-brand-green"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path
              d="M3 9a1 1 0 0 1 1 -1h16a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1l0 -2"
            ></path>
            <path d="M12 8l0 13"></path>
            <path d="M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7"></path>
            <path
              d="M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5"
            ></path>
          </svg>
        </div>
        <div class="text-center md:text-left">
          <h4
            class="text-white text-lg sm:text-2xl 2xl:text-4xl font-black uppercase mb-1 sm:mb-2 leading-tight"
          >
            Clase de prueba <span class="text-brand-green">GRATUITA</span>
          </h4>
          <p class="text-zinc-400 text-xs sm:text-base 2xl:text-xl font-medium">
            Prueba la experiencia CAR Rivas antes de decidir.
          </p>
        </div>
      </div>
      <a
        href={URL_MAIN + "/#contacto"}
        class="w-full md:w-auto text-center bg-brand-green text-white px-8 py-4 sm:px-10 sm:py-5 rounded-xl font-black uppercase tracking-widest hover:bg-white hover:text-zinc-900 transition-all text-[10px] sm:text-sm 2xl:text-lg shadow-xl"
      >
        Reservar Gratis
      </a>
    </div>

    <footer class="mt-10 space-y-1">
      <p
        class="text-center text-zinc-400 text-[9px] sm:text-xs uppercase font-bold tracking-widest"
      >
        Todas las sesiones son dirigidas &middot; Aforo máximo 10 personas por
        grupo
      </p>
      <p
        class="text-center text-zinc-400 text-[9px] sm:text-xs uppercase font-bold tracking-widest"
      >
        1 Clase de prueba gratuita para nuevos clientes
      </p>
    </footer>
  </div>
</section>

<style>
  .animate-fade-in {
    animation: fadeIn 0.4s ease-out forwards;
  }
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>

<script>
  function setupTabs() {
    const buttons = document.querySelectorAll("[data-tab]");
    const contents = document.querySelectorAll(".tab-content");
    buttons.forEach((btn) => {
      btn.addEventListener("click", () => {
        const targetTab = btn.getAttribute("data-tab");
        buttons.forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");
        contents.forEach((content) => {
          if (content.id === `content-${targetTab}`) {
            content.classList.remove("hidden");
            content.classList.add("block");
          } else {
            content.classList.add("hidden");
            content.classList.remove("block");
          }
        });
      });
    });
  }
  setupTabs();
  document.addEventListener("astro:after-swap", setupTabs);
</script>