---
import { pricingData } from "../assets/data/plans_pricing_def.js";
const { funcional, personal, parejas } = pricingData;
const URL_MAIN = import.meta.env.BASE_URL;

const tabBtnClasses =
  "tab-btn px-6 py-3 rounded-xl text-sm font-black uppercase tracking-widest transition-all border-2 border-transparent bg-zinc-100 text-zinc-500 cursor-pointer [&.active]:bg-zinc-900 [&.active]:text-white [&.active]:border-brand-green [&.active]:shadow-lg hover:bg-zinc-200";
---

<section id="tarifas" class="py-4 sm:py-6 lg:py-8 2xl:py-10 bg-white overflow-hidden">
  <div class="max-w-7xl 2xl:max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8">
    <header class="text-center max-w-3xl mx-auto mb-6 sm:mb-20">
      <span class="inline-block text-brand-green text-xs sm:text-sm font-black uppercase tracking-widest mb-3 sm:mb-4">
        Tarifas
      </span>
      <h2 class="text-2xl sm:text-4xl md:text-5xl 2xl:text-6xl font-black text-zinc-900 uppercase mb-4 sm:mb-6">
        Planes para cada atleta
      </h2>
      <p class="text-zinc-500 text-sm sm:text-lg 2xl:text-xl font-medium leading-relaxed">
        Opciones adaptadas a tus objetivos, con grupos reducidos y seguimiento profesional en cada sesión.
      </p>
    </header>

    <div class="flex flex-wrap justify-center gap-3 mb-12 sm:mb-16" id="pricing-tabs">
      <button data-tab="funcional" class={`${tabBtnClasses} active`}>Funcional</button>
      <button data-tab="personal" class={tabBtnClasses}>Personal</button>
      <button data-tab="parejas" class={tabBtnClasses}>Parejas</button>
    </div>

    <div class="max-w-3xl 2xl:max-w-4xl mx-auto">
      
      <div id="content-funcional" class="tab-content block animate-fade-in">
        <div class="bg-zinc-50 rounded-2xl border border-zinc-200 overflow-hidden shadow-sm mb-8">
          {funcional.plans.map((plan, idx) => (
            <div class={`flex justify-between items-center px-5 sm:px-8 py-4 sm:py-5 border-b border-zinc-200 last:border-0 transition-colors ${plan.highlighted ? "bg-zinc-900 text-white border-zinc-700" : idx % 2 !== 0 ? "bg-white" : "bg-zinc-50"}`}>
              <div class="shrink">
                <p class={`font-black uppercase text-xs sm:text-base 2xl:text-lg ${plan.highlighted ? "text-white" : "text-zinc-900"}`}>
                  {plan.name}
                </p>
                <p class={`text-[10px] sm:text-sm font-medium ${plan.highlighted ? "text-zinc-400" : "text-zinc-500"}`}>
                  {plan.sessions}
                </p>
              </div>
              <div class="flex items-baseline gap-1.5 shrink-0 ml-4">
                <span class="text-xl sm:text-3xl 2xl:text-4xl font-black text-brand-green">
                  {plan.price}€
                </span>
                <span class={`text-[9px] sm:text-xs uppercase font-bold whitespace-nowrap ${plan.highlighted ? "text-zinc-400" : "text-zinc-500"}`}>
                  / mes
                </span>
              </div>
            </div>
          ))}
        </div>
        
        <div class="bg-zinc-50 rounded-2xl p-6 sm:p-8 border border-zinc-100">
          <h4 class="font-black text-zinc-900 mb-5 uppercase text-[10px] sm:text-sm tracking-wider">Incluido en entrenamiento funcional:</h4>
          <div class="grid sm:grid-cols-2 gap-x-6 gap-y-3">
            {funcional.includes.map((item) => (
              <div class="flex items-center gap-3">
                <svg class="w-4 h-4 text-brand-green shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg>
                <span class="text-zinc-600 text-xs sm:text-sm font-medium">{item}</span>
              </div>
            ))}
          </div>
        </div>
      </div>

      <div id="content-personal" class="tab-content hidden animate-fade-in">
        <div class="bg-zinc-50 rounded-2xl border border-zinc-200 overflow-hidden shadow-sm mb-8">
          {personal.plans.map((plan, idx) => {
            const isBono = plan.unit.toLowerCase() === "bono";
            return (
              <div class={`flex justify-between items-center px-5 sm:px-8 py-4 sm:py-5 border-b border-zinc-200 last:border-0 transition-colors ${isBono ? "bg-zinc-900 text-white border-zinc-700" : idx % 2 !== 0 ? "bg-white" : "bg-zinc-50"}`}>
                <div class="shrink">
                  <p class={`font-black uppercase text-xs sm:text-base 2xl:text-lg ${isBono ? "text-white" : "text-zinc-900"}`}>
                    {plan.name}
                  </p>
                </div>
                <div class="flex items-baseline gap-1.5 shrink-0 ml-4">
                  <span class="text-xl sm:text-3xl 2xl:text-4xl font-black text-brand-green">
                    {plan.price}€
                  </span>
                  <span class={`text-[9px] sm:text-xs uppercase font-bold whitespace-nowrap ${isBono ? "text-zinc-400" : "text-zinc-500"}`}>
                    / {plan.unit}
                  </span>
                </div>
              </div>
            );
          })}
        </div>
        <div class="bg-zinc-50 rounded-2xl p-6 sm:p-8 border border-zinc-100">
          <h4 class="font-black text-zinc-900 mb-5 uppercase text-[10px] sm:text-sm tracking-wider">Incluido en planes personales:</h4>
          <div class="grid sm:grid-cols-2 gap-x-6 gap-y-3">
            {personal.includes.map((item) => (
              <div class="flex items-center gap-3">
                <svg class="w-4 h-4 text-brand-green shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg>
                <span class="text-zinc-600 text-xs sm:text-sm font-medium">{item}</span>
              </div>
            ))}
          </div>
        </div>
      </div>

      <div id="content-parejas" class="tab-content hidden animate-fade-in">
        <div class="bg-zinc-50 rounded-2xl border border-zinc-200 overflow-hidden shadow-sm">
          {parejas.plans.map((plan, idx) => {
            const isBono = plan.name.toLowerCase().includes("bono");
            return (
              <div class={`flex justify-between items-center px-5 sm:px-8 py-4 sm:py-5 border-b border-zinc-200 last:border-0 transition-colors ${isBono ? "bg-zinc-900 text-white border-zinc-700" : idx % 2 !== 0 ? "bg-white" : "bg-zinc-50"}`}>
                <div class="shrink">
                  <p class={`font-black uppercase text-xs sm:text-base 2xl:text-lg ${isBono ? "text-white" : "text-zinc-900"}`}>
                    {plan.name}
                  </p>
                  <p class={`text-[10px] sm:text-sm font-medium ${isBono ? "text-zinc-400" : "text-zinc-500"}`}>
                    Entrenamiento por parejas
                  </p>
                </div>
                <div class="flex items-baseline gap-1.5 shrink-0 ml-4">
                  <span class="text-xl sm:text-3xl 2xl:text-4xl font-black text-brand-green">
                    {plan.price}€
                  </span>
                  <span class={`text-[9px] sm:text-xs uppercase font-bold whitespace-nowrap ${isBono ? "text-zinc-400" : "text-zinc-500"}`}>
                    / {plan.unit}
                  </span>
                </div>
              </div>
            );
          })}
        </div>
      </div>

    </div>

    <footer class="mt-10 space-y-1">
      <p class="text-center text-zinc-400 text-[9px] sm:text-xs uppercase font-bold tracking-widest">
        Todas las sesiones son dirigidas &middot; Aforo máximo 10 personas por grupo
      </p>
      <p class="text-center text-zinc-400 text-[9px] sm:text-xs uppercase font-bold tracking-widest">
        1 Clase de prueba gratuita para nuevos clientes
      </p>
    </footer>
  </div>
</section>

<style>
  .animate-fade-in {
    animation: fadeIn 0.4s ease-out forwards;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>

<script>
  function setupTabs() {
    const buttons = document.querySelectorAll("[data-tab]");
    const contents = document.querySelectorAll(".tab-content");
    buttons.forEach((btn) => {
      btn.addEventListener("click", () => {
        const targetTab = btn.getAttribute("data-tab");
        buttons.forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");
        contents.forEach((content) => {
          if (content.id === `content-${targetTab}`) {
            content.classList.remove("hidden");
            content.classList.add("block");
          } else {
            content.classList.add("hidden");
            content.classList.remove("block");
          }
        });
      });
    });
  }
  setupTabs();
  document.addEventListener("astro:after-swap", setupTabs);
</script>